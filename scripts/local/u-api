gitroot=~/groundtruth/git

cd $gitroot/op-backend
mvn clean install -Pdev

docker stop op-server-admin-api
docker rm op-server-admin-api

docker stop op-server-web-api
docker rm op-server-web-api

docker stop op-server-internal-api
docker rm op-server-internal-api

docker stop op-server-ocr-1
docker rm op-server-ocr-1

docker stop op-server-ocr-2
docker rm op-server-ocr-2

cd $gitroot/op-backend/server-ocr
mvn docker:build
docker run --name op-server-ocr-1 -d -e SPRING_PROFILES_ACTIVE=dev,fake_ocr -e LOGGING_FILE_FOLDER=/groundtruth/logs -e OCR_SERVER_NAME=OCR_1 -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link op-mysql:mysql opgt/op-server-ocr
docker run --name op-server-ocr-2 -d -e SPRING_PROFILES_ACTIVE=dev,fake_ocr -e LOGGING_FILE_FOLDER=/groundtruth/logs -e OCR_SERVER_NAME=OCR_2 -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link op-mysql:mysql opgt/op-server-ocr

cd $gitroot/op-backend/server-internal-api
mvn docker:build
docker run --name op-server-internal-api -e SPRING_PROFILES_ACTIVE=dev,sendgrid -e SENDGRID_USERNAME=groundtruthinc -e SENDGRID_PASSWORD=flrqth983PNRq -e LOGGING_FILE_FOLDER=/groundtruth/logs -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link op-mysql:mysql --link op-server-ocr-1:op-server-ocr-1 --link op-server-ocr-2:op-server-ocr-2 -d opgt/op-server-internal-api

cd $gitroot/op-backend/server-web-api
mvn docker:build
docker run --name op-server-web-api -p 7800:7800 -e SPRING_PROFILES_ACTIVE=dev,sendgrid -e SENDGRID_USERNAME=groundtruthinc -e SENDGRID_PASSWORD=flrqth983PNRq -e LOGGING_FILE_FOLDER=/groundtruth/logs -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link op-mysql:mysql --link op-server-internal-api:op-server-internal-api -d opgtg/op-server-web-api

cd $gitroot/op-backend/server-admin-api
mvn docker:build
docker run --name op-server-admin-api -p 7801:7801 -e SPRING_PROFILES_ACTIVE=dev,sendgrid -e SENDGRID_USERNAME=groundtruthinc -e SENDGRID_PASSWORD=flrqth983PNRq -e LOGGING_FILE_FOLDER=/groundtruth/logs -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link op-mysql:mysql --link op-server-internal-api:op-server-internal-api -d opgt/op-server-admin-api
