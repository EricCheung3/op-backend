cd ~/openprice-backend
git pull

cd ~/openprice-backend
mvn clean install -Pdev

cd ~/openprice-backend/server-admin-api
mvn docker:build

cd ~/openprice-backend/server-web-api
mvn docker:build

# cd ~/openprice-backend/server-ocr
# mvn docker:build

docker stop openprice-server-admin-api
docker rm openprice-server-admin-api

docker stop openprice-server-web-api
docker rm openprice-server-web-api

# docker stop openprice-server-ocr-1
# docker rm openprice-server-ocr-1

# docker stop openprice-server-ocr-2
# docker rm openprice-server-ocr-2

# docker run --name openprice-server-ocr-1 -d -e SPRING_PROFILES_ACTIVE=dev,docker -e LOGGING_FILE_FOLDER=/groundtruth/logs -e OCR_SERVER_NAME=ocr1 -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images openprice/openprice-server-ocr
# docker run --name openprice-server-ocr-2 -d -e SPRING_PROFILES_ACTIVE=dev,docker -e LOGGING_FILE_FOLDER=/groundtruth/logs -e OCR_SERVER_NAME=ocr2 -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images openprice/openprice-server-ocr
docker run --name openprice-server-web-api -d -p 7800:7800 -e SPRING_PROFILES_ACTIVE=dev,docker,sendgrid -e SENDGRID_USERNAME=groundtruthinc -e SENDGRID_PASSWORD=flrqth983PNRq -e LOGGING_FILE_FOLDER=/groundtruth/logs -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link openprice-mysql:mysql --link openprice-server-ocr-1:openprice-server-ocr-1 openprice/openprice-server-web-api
docker run --name openprice-server-admin-api -d -p 7801:7801 -e SPRING_PROFILES_ACTIVE=dev,docker,sendgrid -e SENDGRID_USERNAME=groundtruthinc -e SENDGRID_PASSWORD=flrqth983PNRq -e LOGGING_FILE_FOLDER=/groundtruth/logs -v ~/groundtruth/logs:/groundtruth/logs -v ~/groundtruth/images:/groundtruth/images --link openprice-mysql:mysql --link openprice-server-ocr-1:openprice-server-ocr-1 openprice/openprice-server-admin-api

cd ~/openprice-backend/server-docs
mvn docker:build

docker stop openprice-server-docs
docker rm openprice-server-docs

docker run --name openprice-server-docs -p 8880:8080 -d openprice/openprice-server-docs
