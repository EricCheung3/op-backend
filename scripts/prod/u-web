gitroot=~/openprice

cd $gitroot/op-web-ui
git pull
npm install
bower install
gulp build --env production

cd $gitroot/op-web-ui/docker
docker build -t opgt/op-server-web-ui .

docker stop op-server-web-ui
docker rm op-server-web-ui

docker run --name op-server-web-ui -d opgt/op-server-web-ui


# Proxy Server
docker stop op-server-proxy
docker rm op-server-proxy

docker run --name op-server-proxy -p 80:80 -v $gitroot/nginx/conf.d:/etc/nginx/conf.d --link op-server-web-ui:op-server-web-ui --link op-server-web-api:op-server-web-api --link op-server-admin-ui:op-server-admin-ui --link op-server-admin-api:op-server-admin-api --link op-server-docs:op-server-docs -d nginx
